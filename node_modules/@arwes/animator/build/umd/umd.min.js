!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.arwes=t():(e.arwes=e.arwes||{},e.arwes.umd=t())}(self,(()=>(()=>{var e={371:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ANIMATOR_DEFAULT_PROPS=t.ANIMATOR_DEFAULT_MANAGER=t.ANIMATOR_DEFAULT_DURATION=t.ANIMATOR_DEFAULT_MACHINE=t.ANIMATOR_DEFAULT_KEYS=void 0;const r="entered",n="entering",o="exiting",a="exited",i="enterStart",c="enterEnd",l="exitStart",s="exitEnd",u="parallel",f="sequence",d="stagger",p={ENTERED:r,ENTERING:n,EXITING:o,EXITED:a,ENTER_START:i,ENTER_END:c,EXIT_START:l,EXIT_END:s,PARALLEL:u,SEQUENCE:f,STAGGER:d};t.ANIMATOR_DEFAULT_KEYS=p;const y=(e,t)=>{switch(t){case d:return(e=>{let t;return Object.freeze({name:d,transitionChildren:r=>{var n;const o=1e3*((null===(n=e.control.getSettings().duration)||void 0===n?void 0:n.stagger)||0),a=Date.now();t=void 0!==t?Math.max(t,a):a,r.forEach((e=>{var r;const n=1e3*((null===(r=e.control.getSettings().duration)||void 0===r?void 0:r.offset)||0);t+=n;const c=(t-a)/1e3;t+=o,e.scheduler.start(c,(()=>e.send(i)))}))}})})(e);case f:return Object.freeze({name:f,transitionChildren:()=>{}});default:return Object.freeze({name:u,transitionChildren:e=>{e.forEach((e=>e.send(i)))}})}},h=Object.freeze({initialState:a,states:{[a]:{onActions:{[i]:n}},[n]:{onEntry:{schedule:e=>{const{duration:{delay:t=0,enter:r=0}={}}=e.control.getSettings();return{duration:t+r,action:c}}},onActions:{[c]:r,[l]:o}},[r]:{onActions:{[l]:o}},[o]:{onEntry:{schedule:e=>{var t;return{duration:(null===(t=e.control.getSettings().duration)||void 0===t?void 0:t.exit)||0,action:s}}},onActions:{[s]:a,[i]:n}}},onCreate:e=>{const t=e.control.getSettings();e.context.manager=y(e,t.manager)},onTransition:e=>{const t=e.getState(),{combine:i}=e.control.getSettings(),c=e.context.manager;switch(t){case n:{const t=i?Array.from(e.children):Array.from(e.children).filter((e=>e.control.getSettings().merge));c.transitionChildren(t);break}case r:{if(i)break;const t=Array.from(e.children).filter((e=>!e.control.getSettings().merge));c.transitionChildren(t);break}case o:Array.from(e.children).forEach((e=>{const t=e.getState();t===n||t===r?e.send(l):t===a&&e.scheduler.stop()}))}},onInitialTransition:e=>{if(e.parent){const t=e.control.getSettings(),o=e.parent.getState(),a=e.parent.control.getSettings(),i=e.parent.context.manager;switch(o){case n:(a.combine||t.merge)&&i.transitionChildren([e]);break;case r:i.transitionChildren([e])}}},onSettingsChange:e=>{const t=e.getState(),c=e.control.getSettings(),s=e.context.manager;if(!e.parent){const s=!0===c.active||void 0===c.active;t!==a&&t!==o||!s?t!==r&&t!==n||s||e.send(l):e.send(i)}s&&s.name===c.manager||(e.context.manager=y(e,c.manager))}});t.ANIMATOR_DEFAULT_MACHINE=h;const v=Object.freeze({enter:.4,exit:.4,delay:0,offset:0,stagger:.04,interval:4});t.ANIMATOR_DEFAULT_DURATION=v;const _=u;t.ANIMATOR_DEFAULT_MANAGER=_;const b={machine:h,duration:v,manager:_};t.ANIMATOR_DEFAULT_PROPS=b},515:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAnimatorSystem=void 0;const n=r(954);t.createAnimatorSystem=()=>{let e,t=0;const r=(e,r)=>{const{machine:o}=r.getSettings();if(!o)throw new Error("A machine is required to create an animator node.");const a=t++;let i,c="";const l=e=>{var t;if(c===e)return;c=e;const n=i,{onEntry:a}=o.states[c]||{},{onTransition:l}=r.getSettings();if((null==a?void 0:a.execute)&&a.execute(n),null==a?void 0:a.schedule){const e=a.schedule(n);if(!Number.isFinite(e.duration)||e.duration<0||!e.action.length)throw new Error("Machine state schedule must return a valid duration and action name.");n.scheduler.start(e.duration,(()=>s(e.action)))}null===(t=o.onTransition)||void 0===t||t.call(o,n),null==l||l(n);for(const e of n.subscribers)e(n)},s=e=>{var t,r;const n=null===(r=null===(t=o.states[c])||void 0===t?void 0:t.onActions)||void 0===r?void 0:r[e];n&&l(n)};return i=Object.freeze({id:a,control:r,parent:e,children:new Set,subscribers:new Set,scheduler:(0,n.createTOScheduler)(),context:{},getState:()=>c,send:s,onSettingsChange:()=>{const e=i;e.scheduler.start("change",.001,(()=>{var t;null===(t=o.onSettingsChange)||void 0===t||t.call(o,e)}))}}),e&&e.children.add(i),n.TOOLS_IS_BROWSER&&i.scheduler.start("setup",.001,(()=>{var e,t;const r=i;null===(e=o.onCreate)||void 0===e||e.call(o,r),l(o.initialState),null===(t=o.onInitialTransition)||void 0===t||t.call(o,r)})),i},o=e=>{e.scheduler.stopAll();for(const t of e.children)o(t);e.parent&&e.parent.children.delete(e),e.children.clear(),e.subscribers.clear()};return Object.freeze({setup:t=>(e&&o(e),e=r(void 0,t),e),register:(t,n)=>{if(!e)throw new Error("A root node needs to be setup before registering nodes.");return r(t,n)},unregister:t=>{e&&(o(t),e.id===t.id&&(e=void 0))}})}},154:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(163).__exportStar(r(515),t)},368:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(163);n.__exportStar(r(513),t),n.__exportStar(r(371),t),n.__exportStar(r(154),t)},513:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},163:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__assign:()=>a,__asyncDelegator:()=>w,__asyncGenerator:()=>m,__asyncValues:()=>S,__await:()=>g,__awaiter:()=>u,__classPrivateFieldGet:()=>j,__classPrivateFieldIn:()=>P,__classPrivateFieldSet:()=>x,__createBinding:()=>d,__decorate:()=>c,__exportStar:()=>p,__extends:()=>o,__generator:()=>f,__importDefault:()=>T,__importStar:()=>E,__makeTemplateObject:()=>O,__metadata:()=>s,__param:()=>l,__read:()=>h,__rest:()=>i,__spread:()=>v,__spreadArray:()=>b,__spreadArrays:()=>_,__values:()=>y});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var a=function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)};function i(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function c(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}function l(e,t){return function(r,n){t(r,n,e)}}function s(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function c(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,c)}l((n=n.apply(e,t||[])).next())}))}function f(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}var d=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function p(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||d(t,e,r)}function y(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function _(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var a=arguments[t],i=0,c=a.length;i<c;i++,o++)n[o]=a[i];return n}function b(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function m(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),a=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){a.push([e,t,r,n])>1||c(e,t)}))})}function c(e,t){try{(r=o[e](t)).value instanceof g?Promise.resolve(r.value.v).then(l,s):u(a[0][2],r)}catch(e){u(a[0][3],e)}var r}function l(e){c("next",e)}function s(e){c("throw",e)}function u(e,t){e(t),a.shift(),a.length&&c(a[0][0],a[0][1])}}function w(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:g(e[n](t)),done:"return"===n}:o?o(t):t}:o}}function S(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=y(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,o,(t=e[r](t)).done,t.value)}))}}}function O(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var A=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&d(t,e,r);return A(t,e),t}function T(e){return e&&e.__esModule?e:{default:e}}function j(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function x(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r}function P(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}},954:e=>{e.exports=window.arwes.tools}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}return r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(368)})()));